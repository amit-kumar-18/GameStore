<section
  class="flex flex-col items-center justify-center min-h-screen py-10 px-4"
>
  <div
    class="max-w-xl w-full bg-gray-800 p-8 rounded-xl shadow-lg border border-gray-700"
  >
    <h1
      class="text-3xl font-bold text-center mb-6 text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-600"
    >
      {{ formTitle }}
    </h1>

    <p class="text-gray-300 text-center mb-8">
      Fill out the form below to
      {{ formTitle.includes("Edit") ? "edit" : "add" }} a game.
    </p>

    <form [formGroup]="gameForm" (ngSubmit)="submit()" class="space-y-6">
      <!-- Game Name -->
      <div>
        <label class="block text-sm font-medium text-gray-400 mb-1"
          >Game Name</label
        >
        <input
          type="text"
          formControlName="name"
          placeholder="e.g., Cyberpunk 2077"
          class="w-full px-4 py-2 text-gray-200 bg-gray-700 border border-gray-600 rounded-lg placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500"
          [class.border-red-500]="
            gameForm.get('name')?.invalid && gameForm.get('name')?.touched
          "
        />
      </div>

      <!-- Genre Selection -->
      <div>
        <label class="block text-sm font-medium text-gray-400 mb-1"
          >Select Genre</label
        >
        <select
          formControlName="genreId"
          class="w-full px-4 py-2 text-gray-200 bg-gray-700 border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"
          [class.border-red-500]="
            gameForm.get('genreId')?.invalid && gameForm.get('genreId')?.touched
          "
        >
          <option value="" disabled>Select Genre</option>
          <option *ngFor="let genre of genres" [value]="genre.id">
            {{ genre.name }}
          </option>
        </select>
      </div>

      <!-- Price & Date -->
      <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">
        <!-- Price -->
        <div>
          <label class="block text-sm font-medium text-gray-400 mb-1"
            >Price</label
          >
          <div class="relative">
            <div
              class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-gray-500"
            >
              ₹
            </div>
            <input
              type="number"
              formControlName="price"
              inputmode="decimal"
              pattern="^\d*\.?\d*$"
              (keydown)="allowOnlyNumbers($event)"
              placeholder="0.00"
              min="0.00"
              step="0.01"
              class="w-full pl-7 pr-4 py-2 text-gray-200 bg-gray-700 border border-gray-600 rounded-lg placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500"
              [class.border-red-500]="
                gameForm.get('price')?.invalid && gameForm.get('price')?.touched
              "
            />
          </div>
        </div>

        <!-- Release Date -->
        <div>
          <label class="block text-sm font-medium text-gray-400 mb-1"
            >Release Date</label
          >
          <input
            type="date"
            formControlName="releaseDate"
            class="w-full px-4 py-2 text-gray-200 bg-gray-700 border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"
            [class.border-red-500]="
              gameForm.get('releaseDate')?.invalid &&
              gameForm.get('releaseDate')?.touched
            "
          />
        </div>
      </div>

      <!-- Publisher -->
      <div>
        <label class="block text-sm font-medium text-gray-400 mb-1"
          >Publisher</label
        >
        <input
          type="text"
          formControlName="publisher"
          placeholder="e.g., CD Projekt Red"
          class="w-full px-4 py-2 text-gray-200 bg-gray-700 border border-gray-600 rounded-lg placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500"
        />
      </div>

      <!-- Image Upload -->
      <div>
        <label class="block text-sm font-medium text-gray-400 mb-1"
          >Game Image</label
        >

        <div *ngIf="selectedImagePreview" class="mb-4">
          <img
            [src]="selectedImagePreview"
            alt="Selected Game"
            class="rounded-lg w-40 mx-auto border border-gray-600"
          />
        </div>

        <label
          for="image"
          class="flex flex-col items-center justify-center w-full h-40 border-2 border-gray-600 border-dashed rounded-lg cursor-pointer bg-gray-700 hover:bg-gray-600"
        >
          <div class="flex flex-col items-center justify-center pt-5 pb-6">
            <i class="fas fa-cloud-upload-alt text-3xl text-gray-400 mb-2"></i>
            <p class="mb-2 text-sm text-gray-400">
              <span class="font-semibold">Click to upload</span> or drag and
              drop
            </p>
            <p class="text-xs text-gray-500">JPEG, PNG, JPG, Webp (Max 5MB)</p>
          </div>
          <input
            id="image"
            type="file"
            formControlName="image"
            accept="image/*"
            (change)="onImageSelected($event)"
            class="hidden"
          />
        </label>
      </div>

      <!-- Description -->
      <div>
        <label class="block text-sm font-medium text-gray-400 mb-1"
          >Description</label
        >
        <textarea
          formControlName="description"
          rows="4"
          placeholder="Provide a detailed description..."
          class="w-full px-4 py-2 text-gray-200 bg-gray-700 border border-gray-600 rounded-lg placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500"
        ></textarea>
      </div>

      <!-- Submit Button -->
      <button
        type="submit"
        [disabled]="gameForm.invalid"
        class="w-full bg-gradient-to-r from-pink-500 to-purple-600 hover:from-pink-600 hover:to-purple-700 text-white font-bold py-3 px-8 rounded-full shadow-lg transform transition-transform duration-300 hover:scale-105 focus:outline-none focus:ring-4 focus:ring-purple-500 focus:ring-opacity-50 cursor-pointer"
      >
        {{ formTitle.includes("Edit") ? "Update Game" : "Add Game" }}
      </button>
    </form>

    <button
      type="button"
      (click)="showGames()"
      class="mt-4 text-sm text-gray-400 underline hover:text-white cursor-pointer"
    >
      ← Go back to Game List
    </button>
  </div>
</section>
